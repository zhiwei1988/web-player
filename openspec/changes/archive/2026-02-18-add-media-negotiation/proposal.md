## Why

当前系统中，服务端的编码格式通过环境变量/命令行参数指定，客户端的解码器类型通过 URL 参数指定，两端独立配置且没有任何协商机制。这导致：
1. 客户端无法在连接时得知服务端实际发送的编码格式，配置不一致时解码失败且无明确错误提示
2. 未来扩展音频流时，缺乏统一的能力描述和协商框架

## What Changes

- 新增 WebSocket 连接建立后的 JSON 信令协商阶段，在数据传输前完成媒体能力交换
- 服务端在连接建立后主动发送自身支持的媒体流描述（编码格式、分辨率等）
- 客户端收到后回复确认或拒绝，协商成功后服务端才开始发送媒体数据
- **BREAKING**: 连接建立后不再立即发送视频帧，需先完成协商握手

## Capabilities

### New Capabilities

- `media-negotiation`: 基于 JSON 的媒体流协商协议，定义信令消息格式、协商流程、超时处理和错误机制

### Modified Capabilities

（无）

## Impact

- **服务端**: `src/server/` — 需要在连接建立后增加协商阶段，解析客户端 JSON 回复，协商成功后再启动视频发送
- **客户端**: `src/js/` — 需要在 WebSocket `onopen` 后处理协商消息，根据协商结果初始化解码器，替代当前 URL 参数方式
- **帧协议**: 现有 `frame_protocol` 不受影响，协商使用独立的 JSON 文本消息通道（WebSocket TEXT frame）
- **兼容性**: 破坏性变更，旧版客户端无法与新版服务端直接通信
